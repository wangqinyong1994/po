#!/usr/bin/env node
/*
 * @Author: ngwang
 * @Date: 2021-02-08 14:10:12
 * @LastEditors: ngwang
 * @LastEditTime: 2021-04-08 18:22:15
 */

const program = require("commander");
const process = require("process");
const yargs = require("yargs");
const qs = require("querystring");
const pkg = require("../package.json");

program.version(pkg.version);

program.usage("<command>");

program.option("-s <source>", "文件来源");

program
  .command("add")
  .description("新增自定义模版")
  .action(() => {
    require("../src/commands/add")({
      src: program.opts().s,
    });
  });

program
  .command("create")
  .description("create page")
  .alias("cre")
  .action(() => {
    const argv = yargs.argv._.slice(1);
    const options = qs.parse(argv.join("&"));
    require("../src/commands/create/index")({ options });
  });

// 展示自定义模版
program
  .command("list")
  .description("显示所有目前的自定义模版")
  .alias("l")
  .action(() => {
    require("../src/commands/list")();
  });

program
  .command("init")
  .description("初始化项目")
  .alias("i")
  .action(() => {
    require("../src/commands/init")();
  });

// 删除自定义模版
program
  .command("delete")
  .description("删除自定义模版")
  .alias("d")
  .action(() => {
    require("../src/commands/delete")();
  });

// 创建项目eslint prettier editorconfig 下载eslint-config-po
program
  .command("standard")
  .description("创建项目eslint prettier editorconfig & 下载eslint-config-po")
  .action(() => {
    require("../src/commands/standard")();
  });

program.parse(process.argv);

if (!program.args.length) {
  program.help();
}
